/*!
* Author: Antonio Dal Sie
* Name: lv-ripple
* Description: Material ripple effects
*/
!function(e,n){var t=function(){function n(){T.enable=e("ripple, *[ripple], .ripple").toArray()}function t(e,n){var t=e.indexOf(n);return t>-1&&delete e[t],i(e)}function i(e){return e.filter(function(e){return void 0!=e})}function r(){e(T.enable).each(function(n,t){delete T.enable[n],e(t).trigger("r-destroy")}),T.enable=i(T.enable)}function o(){e(T.enable).each(function(n,t){delete T.enable[n],e(t).trigger("r-disable"),T.disable.push(t)}),T.enable=i(T.enable)}function a(){e(T.disable).each(function(n,t){delete T.disable[n],e(t).trigger("r-enable"),T.enable.push(t)}),T.disable=i(T.disable)}function l(){e(T.enable).each(function(n,t){e(t).trigger("r-update")})}function s(n){T.enable=t(T.enable,e(n)[0]),e(n).trigger("r-destroy")}function u(n){T.enable=t(T.enable,e(n)[0]),e(n).trigger("r-disable"),T.disable.push(e(n)[0])}function c(n){T.disable=t(T.disable,e(n)[0]),e(n).trigger("r-enable"),T.enable.push(e(n)[0])}function d(n){e(n).trigger("r-update")}function p(n){var t=e(n).html(),i=e("<button></button>"),r=e(n).hasClass("r-overink");if(r){i=e("<div></div>");var o=e("<button></button>")}if("ripple"!=e(n).prop("nodeName").toLowerCase()){var a=e(n).clone();e(a).empty(),e(a).removeClass("ripple"),e(a).removeAttr("ripple"),e(a).removeAttr("data-ripple"),e(a).removeAttr("lv-ripple"),r?o=e(a):i=e(a)}return i.addClass("ripple-cont"),r?(o.addClass("ripple-content"),o.html(t),i.append(o)):i.append("<div class='ripple-content'>"+t+"</div>"),i.append("<div class='ink-content'></div>"),i[0].outerHTML}function f(){e(T.enable).each(function(n,t){var i=p(t),r=e.now();i=e(i),i.addClass("ripple-idm-"+r),e(t).after(i).remove(),i=e(".ripple-idm-"+r),i.removeClass("ripple-idm-"+r),T.enable[n]=i[0],h(i[0],n)})}function b(n){if(e(n).length<=1){var t=p(n),i=e.now();t=e(t),t.addClass("ripple-idm-"+i),e(n).after(t).remove(),t=e(".ripple-idm-"+i),t.removeClass("ripple-idm-"+i);var r=T.enable.push(t[0]);return h(t[0],r)}e(n).each(function(e,n){return b(n)})}function h(n,i){function r(){b=u.hasClass("r-icon"),h=u.hasClass("r-overink"),d="undefined"!=typeof n.attributes["r-light"],p="undefined"!=typeof n.attributes["r-color"]&&n.attributes["r-color"].nodeValue,f="undefined"!=typeof n.attributes["r-opacity"]?n.attributes["r-opacity"].nodeValue:null,m="undefined"!=typeof n.attributes["r-prevent"]&&n.attributes["r-prevent"].nodeValue}function o(t){function r(){var e=(x-A)/100*10;L=setInterval(function(){A<x?(A+=e,C.css({height:F+A,width:F+A})):clearInterval(L)},50)}function o(){e(window).bind(w.end+" blur",a),u.bind("mouseleave",a)}function a(){e(window).unbind(w.end+" blur",a),u.unbind("mouseleave",a),clearInterval(L),clearInterval(g),clearInterval(y);var n=A<=x?E.rippleDelay:1;A=A<x?x:A,C.css({height:F+A,width:F+A}),setTimeout(function(){T.css({opacity:0}),C.hasClass("new")&&!b&&c.css("background-color",""),setTimeout(function(){C.remove(),h&&!c.find(".ink").length&&c.hide(0)},550)},n)}var l=t.timeStamp;if(0==l){var s=new Date;l=s.getTime()}if(u.hasClass("r-childprevent"))return u.removeClass("r-childprevent");if(u.parents(".ripple-cont").addClass("r-childprevent"),I[i].indexOf(t.timeStamp)==-1){I[i].push(t.timeStamp);var k=e(t.target);if("undefined"==typeof n.attributes["r-disabled"]&&!u.hasClass("disabled")&&!(k.hasClass("r-noink")||k.parents(".r-noink").length||m&&u.is(m))){h&&c.show(0);var C=e("<div class='ink'><i></i></div>"),T=C.find("i"),A=0,x=0;c.find(".ink").removeClass("new"),C.addClass("new"),c.prepend(C);var H="touchstart"!=t.type?t.pageX-c.offset().left:t.originalEvent.touches[0].pageX-c.offset().left,O="touchstart"!=t.type?t.pageY-c.offset().top:t.originalEvent.touches[0].pageY-c.offset().top;b?(H=0,O=0):(C.css({top:O+"px",left:H+"px"}),H=H>c.outerWidth()/2?H-c.outerWidth()/2:c.outerWidth()/2-H,O=O>c.outerHeight()/2?O-c.outerHeight()/2:c.outerHeight()/2-O);var P=2*H+2*O,W=c.outerHeight(),D=c.outerWidth(),F=Math.sqrt(D*D+W*W),x=P;x=b?0:x,C.css({height:F,width:F}),T.css("opacity",0);var S=f||E.rippleOpacity;if(p?T.css("background-color",p):d&&T.css("background-color","rgb(255,255,255)"),!b)if(c.css("background-color","rgba(0,0,0,0.098)"),p){var V=v(p);c.css("background-color","rgba("+V.r+","+V.g+","+V.b+",0.098)")}else d&&c.css("background-color","rgba(255,255,255,0.098)");setTimeout(function(){C.addClass("animate")},1),T.css({opacity:S});var L=null;r(),"mousedown"==t.type&&1!==t.which?setTimeout(function(){a()},100):"click"==t.type?setTimeout(function(){a()},300):"touchstart"==t.type?(g=setTimeout(function(){a()},1e3),e(window).bind("scroll",forceRemoveInk),y=setTimeout(function(){e(window).unbind("scroll",forceRemoveInk)},500),o()):o()}}}function a(){T.enable=t(T.enable,e(u)[0]),u.children(".ink-content").remove();var n=u.find(".ripple-content").html();u.find(".ripple-content").remove(),u.append(n),u.removeClass("ripple-cont"),u.unbind("mousedown touchstart",o)}function l(){T.enable=t(T.enable,e(u)[0]),u.unbind("mousedown touchstart",o),T.disable.push(e(u)[0])}function s(){T.disable=t(T.disable,e(u)[0]),u.bind("mousedown touchstart",o),T.enable.push(e(u)[0])}var u=null,c=null,d=!1,p=!1,f=null,b=!1,h=!1,m=!1,i=i,g=null,y=null;u=e(n),n=u[0],"undefined"!=typeof PointerEventsPolyfill&&PointerEventsPolyfill.initialize({selector:u,mouseEvents:["click","dblclick"]});var w={start:"ontouchstart"in document.documentElement?E.mobileTouch?"touchstart":"click":"mousedown",end:"ontouchend"in document.documentElement?"touchend":"mouseup"};return I[i]=[],u.on("r-destroy",function(){u.children(".ink-content").remove();var e=u.find(".ripple-content").html();u.find(".ripple-content").remove(),u.append(e),u.removeClass("ripple-cont"),u.unbind(w.start,o)}),u.on("r-disable",function(){u.unbind(w.start,o)}),u.on("r-enable",function(){u.bind(w.start,o)}),u.on("r-update",function(){r()}),u.removeClass("ripple"),c=u.children(".ink-content"),r(),u.bind(w.start,o),{element:u,destroy:a,disable:l,enable:s,update:r}}function v(e){var n=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,t=n.exec(e);return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function m(t){t?k(t):e.noop(),n(),f()}function g(e){return b(e?e:this)}function y(){return T}function w(){return I}function k(n){e.extend(E,n)}function C(e){switch(e){case"enable":c(this);break;case"disable":u(this);break;case"destroy":s(this);break;case"update":d(this);break;default:return g(this)}}var T={enable:[],disable:[]},I=[],E={rippleOpacity:.2,rippleDelay:100,mobileTouch:!1};return{init:m,initElement:g,list:y,eventHistory:w,config:k,destroy:r,disable:o,enable:a,update:l,"switch":C}}();e.ripple=t,e.fn.ripple=t["switch"]}(jQuery,window);