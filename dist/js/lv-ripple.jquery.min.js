/*!
* Author: Antonio Dal Sie
* Name: lv-ripple
* Description: Material ripple effects
*/
!function(e,t){var n=function(){function t(){T.enable=e("ripple, *[ripple], .ripple").toArray()}function n(e,t){var n=e.indexOf(t);return n>-1&&delete e[n],i(e)}function i(e){return e.filter(function(e){return void 0!=e})}function r(){e(T.enable).each(function(t,n){delete T.enable[t],e(n).trigger("r-destroy")}),T.enable=i(T.enable)}function a(){e(T.enable).each(function(t,n){delete T.enable[t],e(n).trigger("r-disable"),T.disable.push(n)}),T.enable=i(T.enable)}function o(){e(T.disable).each(function(t,n){delete T.disable[t],e(n).trigger("r-enable"),T.enable.push(n)}),T.disable=i(T.disable)}function l(){e(T.enable).each(function(t,n){e(n).trigger("r-update")})}function s(t){T.enable=n(T.enable,e(t)[0]),e(t).trigger("r-destroy")}function u(t){T.enable=n(T.enable,e(t)[0]),e(t).trigger("r-disable"),T.disable.push(e(t)[0])}function c(t){T.disable=n(T.disable,e(t)[0]),e(t).trigger("r-enable"),T.enable.push(e(t)[0])}function d(t){e(t).trigger("r-update")}function p(t){var n=e(t).html(),i=e("<button></button>"),r=e(t).hasClass("r-overink");if(r){i=e("<div></div>");var a=e("<button></button>")}if("ripple"!=e(t).prop("nodeName").toLowerCase()){var o=e(t).clone();e(o).empty(),o[0].className="",e(o).removeClass("ripple"),e(o).removeAttr("ripple"),e(o).removeAttr("data-ripple"),e(o).removeAttr("lv-ripple"),r?a=e(o):i=e(o)}return e.each(t.attributes,function(){i.attr(this.name,this.value)}),i.addClass("ripple-cont"),r?(a.addClass("ripple-content"),a.html(n),i.append(a)):i.append("<div class='ripple-content'>"+n+"</div>"),i.append("<div class='ink-content'></div>"),i[0].outerHTML}function f(){e(T.enable).each(function(t,n){var i=p(n),r=e.now();i=e(i),i.addClass("ripple-idm-"+r),e(n).after(i).remove(),i=e(".ripple-idm-"+r),i.removeClass("ripple-idm-"+r),T.enable[t]=i[0],h(i[0],t)})}function b(t){if(e(t).length<=1){var n=p(t),i=e.now();n=e(n),n.addClass("ripple-idm-"+i),e(t).after(n).remove(),n=e(".ripple-idm-"+i),n.removeClass("ripple-idm-"+i);var r=T.enable.push(n[0]);return h(n[0],r)}e(t).each(function(e,t){return b(t)})}function h(t,i){function r(){b=u.hasClass("r-icon"),h=u.hasClass("r-overink"),d="undefined"!=typeof t.attributes["r-light"],p="undefined"!=typeof t.attributes["r-color"]&&t.attributes["r-color"].nodeValue,f="undefined"!=typeof t.attributes["r-opacity"]?t.attributes["r-opacity"].nodeValue:null,m="undefined"!=typeof t.attributes["r-prevent"]&&t.attributes["r-prevent"].nodeValue}function a(n){function r(){var e=(x-A)/100*10;L=setInterval(function(){A<x?(A+=e,C.css({height:F+A,width:F+A})):clearInterval(L)},50)}function a(){e(window).bind(w.end+" blur",o),u.bind("mouseleave",o)}function o(){e(window).unbind(w.end+" blur",o),u.unbind("mouseleave",o),clearInterval(L),clearInterval(g),clearInterval(y);var t=A<=x?E.rippleDelay:1;A=A<x?x:A,C.css({height:F+A,width:F+A}),setTimeout(function(){T.css({opacity:0}),C.hasClass("new")&&!b&&c.css("background-color",""),setTimeout(function(){C.remove(),h&&!c.find(".ink").length&&c.hide(0)},550)},t)}var l=n.timeStamp;if(0==l){var s=new Date;l=s.getTime()}if(u.hasClass("r-childprevent"))return u.removeClass("r-childprevent");if(u.parents(".ripple-cont").addClass("r-childprevent"),I[i].indexOf(n.timeStamp)==-1){I[i].push(n.timeStamp);var k=e(n.target);if("undefined"==typeof t.attributes["r-disabled"]&&!u.hasClass("disabled")&&!(k.hasClass("r-noink")||k.parents(".r-noink").length||m&&u.is(m))){h&&c.show(0);var C=e("<div class='ink'><i></i></div>"),T=C.find("i"),A=0,x=0;c.find(".ink").removeClass("new"),C.addClass("new"),c.prepend(C);var H="touchstart"!=n.type?n.pageX-c.offset().left:n.originalEvent.touches[0].pageX-c.offset().left,O="touchstart"!=n.type?n.pageY-c.offset().top:n.originalEvent.touches[0].pageY-c.offset().top;b?(H=0,O=0):(C.css({top:O+"px",left:H+"px"}),H=H>c.outerWidth()/2?H-c.outerWidth()/2:c.outerWidth()/2-H,O=O>c.outerHeight()/2?O-c.outerHeight()/2:c.outerHeight()/2-O);var P=2*H+2*O,W=c.outerHeight(),D=c.outerWidth(),F=Math.sqrt(D*D+W*W),x=P;x=b?0:x,C.css({height:F,width:F}),T.css("opacity",0);var S=f||E.rippleOpacity;if(p?T.css("background-color",p):d&&T.css("background-color","rgb(255,255,255)"),!b)if(c.css("background-color","rgba(0,0,0,0.098)"),p){var V=v(p);c.css("background-color","rgba("+V.r+","+V.g+","+V.b+",0.098)")}else d&&c.css("background-color","rgba(255,255,255,0.098)");setTimeout(function(){C.addClass("animate")},1),T.css({opacity:S});var L=null;r(),"mousedown"==n.type&&1!==n.which?setTimeout(function(){o()},100):"click"==n.type?setTimeout(function(){o()},300):"touchstart"==n.type?(g=setTimeout(function(){o()},1e3),e(window).bind("scroll",forceRemoveInk),y=setTimeout(function(){e(window).unbind("scroll",forceRemoveInk)},500),a()):a()}}}function o(){T.enable=n(T.enable,e(u)[0]),u.children(".ink-content").remove();var t=u.find(".ripple-content").html();u.find(".ripple-content").remove(),u.append(t),u.removeClass("ripple-cont"),u.unbind("mousedown touchstart",a)}function l(){T.enable=n(T.enable,e(u)[0]),u.unbind("mousedown touchstart",a),T.disable.push(e(u)[0])}function s(){T.disable=n(T.disable,e(u)[0]),u.bind("mousedown touchstart",a),T.enable.push(e(u)[0])}var u=null,c=null,d=!1,p=!1,f=null,b=!1,h=!1,m=!1,i=i,g=null,y=null;u=e(t),t=u[0],"undefined"!=typeof PointerEventsPolyfill&&PointerEventsPolyfill.initialize({selector:u,mouseEvents:["click","dblclick"]});var w={start:"ontouchstart"in document.documentElement?E.mobileTouch?"touchstart":"click":"mousedown",end:"ontouchend"in document.documentElement?"touchend":"mouseup"};return I[i]=[],u.on("r-destroy",function(){u.children(".ink-content").remove();var e=u.find(".ripple-content").html();u.find(".ripple-content").remove(),u.append(e),u.removeClass("ripple-cont"),u.unbind(w.start,a)}),u.on("r-disable",function(){u.unbind(w.start,a)}),u.on("r-enable",function(){u.bind(w.start,a)}),u.on("r-update",function(){r()}),u.removeClass("ripple"),c=u.children(".ink-content"),r(),u.bind(w.start,a),{element:u,destroy:o,disable:l,enable:s,update:r}}function v(e){var t=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,n=t.exec(e);return{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}}function m(n){n?k(n):e.noop(),t(),f()}function g(e){return b(e?e:this)}function y(){return T}function w(){return I}function k(t){e.extend(E,t)}function C(e){switch(e){case"enable":c(this);break;case"disable":u(this);break;case"destroy":s(this);break;case"update":d(this);break;default:return g(this)}}var T={enable:[],disable:[]},I=[],E={rippleOpacity:.2,rippleDelay:100,mobileTouch:!1};return{init:m,initElement:g,list:y,eventHistory:w,config:k,destroy:r,disable:a,enable:o,update:l,"switch":C}}();e.ripple=n,e.fn.ripple=n["switch"]}(jQuery,window);